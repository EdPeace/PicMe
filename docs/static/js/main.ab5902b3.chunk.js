(this.webpackJsonppicme=this.webpackJsonppicme||[]).push([[0],{36:function(e,t,o){},37:function(e,t,o){},56:function(e,t,o){},58:function(e,t,o){},59:function(e,t,o){},60:function(e,t,o){},66:function(e,t,o){"use strict";o.r(t);var a=o(1),c=o.n(a),s=o(30),n=o.n(s),i=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,67)).then((function(t){var o=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,n=t.getTTFB;o(e),a(e),c(e),s(e),n(e)}))},l=(o(36),o(9)),r=o(10),d=o(12),j=o(11),h=o(18),p=o(2),u=(o(37),o(4)),C=o.n(u),m=(o(56),o(0)),b=function(e){Object(d.a)(o,e);var t=Object(j.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onBackToClick=function(t){window.location=e.props.backTo},e.onDeleteClick=function(t){C.a.post("https://api.movil2.cointla.com/api/colecciones/eliminar.php",{ColCod:e.props.deleteCol}).then((function(t){window.location=e.props.backTo}))},e.onLogoutClick=function(e){window.localStorage.removeItem("logued"),window.location="#/"},localStorage.getItem("logued")||(window.location="#/"),e.state={backTo:"",deleteCol:"",logout:""},e}return Object(r.a)(o,[{key:"componentDidMount",value:function(){void 0!==this.props.backTo&&this.setState({backTo:Object(m.jsx)("div",{onClick:this.onBackToClick,className:"backToIcon",children:Object(m.jsx)("i",{className:"material-icons",children:"arrow_back_ios"})})}),void 0!==this.props.deleteCol&&this.setState({deleteCol:Object(m.jsx)("div",{onClick:this.onDeleteClick,className:"deleteIcon",children:Object(m.jsx)("i",{className:"material-icons",children:"delete"})})});var e=localStorage.getItem("logued");void 0===this.props.backTo&&void 0===this.props.deleteCol&&e&&this.setState({logout:Object(m.jsx)("div",{onClick:this.onLogoutClick,className:"logoutIcon",children:Object(m.jsx)("i",{className:"material-icons",children:"logout"})})})}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"TopBar",children:[this.state.backTo,this.state.deleteCol,this.state.logout,Object(m.jsx)("div",{className:"TopBarLogo"}),Object(m.jsx)("div",{className:"MenuIcon"})]})}}]),o}(c.a.Component),v=(o(58),function(e){Object(d.a)(o,e);var t=Object(j.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onLoginClick=function(t){var o=e.state.UsrUsr,a=e.state.UsrPwd;C.a.defaults.withCredentials=!0,C.a.post("https://api.movil2.cointla.com/api/usuarios/login.php",{UsrUsr:o,UsrPwd:a}).then((function(t){var o=t.data;"OK"===o.status?(window.location="#/colecciones",window.localStorage.setItem("logued","OK")):e.setState({errorMessage:o.payload.message})}))},e.state={UsrUsr:"",UsrPwd:"",errorMessage:""},e}return Object(r.a)(o,[{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"LoginPage",children:[Object(m.jsx)(b,{}),Object(m.jsx)("div",{className:"LogoContainer",children:Object(m.jsx)("div",{className:"Logo"})}),Object(m.jsx)("div",{className:"FormContainer",children:Object(m.jsxs)("div",{className:"LoginForm",children:[Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("input",{type:"text",id:"UsrUsr",value:this.state.UsrUsr,onChange:function(t){return e.setState({UsrUsr:t.target.value})},placeholder:"Usuario",autoComplete:"new-password"})}),Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("input",{type:"password",id:"UsrPwd",value:this.state.UsrPwd,onChange:function(t){return e.setState({UsrPwd:t.target.value})},placeholder:"Contrase\xf1a",autoComplete:"new-password"})}),Object(m.jsx)("div",{className:"ErrorMessage",children:this.state.errorMessage}),Object(m.jsx)("div",{className:"FieldContainer",children:Object(m.jsx)("div",{onClick:this.onLoginClick,className:"Button",children:"Acceder"})})]})})]})}}]),o}(c.a.Component)),O=o(13),f=(o(59),function(e){Object(d.a)(o,e);var t=Object(j.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onColClick=function(e){var t=e.target.id;window.location="#/coleccion/"+t},e.onAddColClick=function(t){e.setState({showAddPage:"block"})},e.onCancelClick=function(t){e.setState({showAddPage:"none"})},e.onCrearClick=function(t){var o=Object(O.a)(e);C.a.post("https://api.movil2.cointla.com/api/colecciones/crear.php",{ColNom:e.state.ColNom,ColDsc:e.state.ColNom}).then((function(t){o.loadData(),e.setState({showAddPage:"none",ColNom:""})}))},e.loadData=function(){C.a.defaults.withCredentials=!0,C.a.post("https://api.movil2.cointla.com/api/colecciones/listado.php",{}).then((function(t){var o=t.data;if("OK"===o.status){var a=[];for(var c in o.payload)if(Object.hasOwnProperty.call(o.payload,c)){var s=o.payload[c];a.push(Object(m.jsxs)("div",{className:"CItem",id:s.ColCod,onClick:e.onColClick,children:[Object(m.jsx)("div",{className:"Desc",children:s.ColDsc}),Object(m.jsx)("div",{className:"Icon",children:Object(m.jsx)("i",{className:"material-icons",children:"arrow_forward_ios"})})]},s.ColCod))}e.setState({cols_divs:a})}else e.setState({errorMessage:o.payload.message})}))},e.state={cols_divs:"",showAddPage:"none",ColNom:""},e}return Object(r.a)(o,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("div",{className:"ColeccionesPage",children:[Object(m.jsx)(b,{}),Object(m.jsx)("div",{className:"AddColPage",style:{display:this.state.showAddPage},children:Object(m.jsxs)("div",{className:"Container",children:[Object(m.jsx)("h3",{children:"Ingrese Nombre:"}),Object(m.jsx)("div",{className:"NombreInput",children:Object(m.jsx)("input",{placeholder:"Escriba el nombre de la colecci\xf3n.",onChange:function(t){return e.setState({ColNom:t.target.value})},value:this.state.ColNom})}),Object(m.jsx)("div",{className:"CrearButton",onClick:this.onCrearClick,children:"CREAR"}),Object(m.jsx)("div",{className:"CancelButton",onClick:this.onCancelClick,children:"CANCELAR"})]})}),Object(m.jsx)("h2",{className:"Title",children:"Colecciones"}),Object(m.jsx)("div",{className:"AddColButton",onClick:this.onAddColClick,children:Object(m.jsx)("i",{className:"material-icons",children:"add_circle_outline"})}),this.state.cols_divs]})}}]),o}(c.a.Component)),x=(o(60),function(e){Object(d.a)(o,e);var t=Object(j.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).onAddFotoClick=function(e){document.getElementById("file").click()},e.onFotoSelected=function(t){var o=document.getElementById("file");if(o.files[0].size<=19e6){var a=new FormData;a.append("ColCod",e.props.ColCod),a.append("FotFile",o.files[0]);var c=Object(O.a)(e);e.setState({showLoading:"block"}),C.a.post("https://api.movil2.cointla.com/api/fotos/crear.php",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){c.loadData(c.props.ColCod),e.setState({showLoading:"none"})}))}else alert("La fotografia es un pesada (2MB M\xe1ximo)")},e.loadData=function(t){var o=Object(O.a)(e);C.a.defaults.withCredentials=!0,C.a.post("https://api.movil2.cointla.com/api/colecciones/obtener.php",{ColCod:t}).then((function(a){var c=a.data;if("OK"===c.status){var s=[],n=c.payload.ColDsc;for(var i in c.payload.fotos)Object.hasOwnProperty.call(c.payload.fotos,i)&&function(){var e=c.payload.fotos[i],a="https://api.movil2.cointla.com/data"+e.FotPath;s.push(Object(m.jsx)("div",{className:"FItem",id:e.FotCod,style:{backgroundImage:"url("+a+")"},children:Object(m.jsx)("div",{className:"inFotoIcon",onClick:function(a){C.a.post("https://api.movil2.cointla.com/api/fotos/eliminar.php",{ColCod:t,FotCod:e.FotCod}).then((function(e){o.loadData(o.props.ColCod)}))},children:Object(m.jsx)("i",{className:"material-icons",children:"delete"})})},e.FotCod))}();e.setState({col_fotos:s,col_name:n})}else e.setState({errorMessage:c.payload.message})}))},e.state={col_fotos:"",col_name:"",showLoading:"none"},e}return Object(r.a)(o,[{key:"componentDidMount",value:function(){this.loadData(this.props.ColCod)}},{key:"render",value:function(){return Object(m.jsxs)("div",{className:"ColeccionPage",children:[Object(m.jsx)(b,{backTo:"#/colecciones",deleteCol:this.props.ColCod}),Object(m.jsx)("h2",{className:"Title",children:this.state.col_name}),Object(m.jsxs)("div",{className:"LoadingAxios",style:{display:this.state.showLoading},children:[Object(m.jsxs)("div",{class:"lds-ripple",children:[Object(m.jsx)("div",{}),Object(m.jsx)("div",{})]}),Object(m.jsx)("div",{class:"LoadingText",children:"Cargando..."})]}),Object(m.jsx)("input",{type:"file",onChange:this.onFotoSelected,name:"file",id:"file",style:{display:"none"}}),Object(m.jsx)("div",{className:"AddFotoButton",onClick:this.onAddFotoClick,children:Object(m.jsx)("i",{className:"material-icons",children:"add_a_photo"})}),Object(m.jsx)("div",{className:"FotosContainer",children:this.state.col_fotos})]})}}]),o}(c.a.Component)),g=function(){var e=Object(p.f)().ColCod;return Object(m.jsx)(x,{ColCod:e})},k=function(e){Object(d.a)(o,e);var t=Object(j.a)(o);function o(){return Object(l.a)(this,o),t.apply(this,arguments)}return Object(r.a)(o,[{key:"render",value:function(){return Object(m.jsx)("div",{className:"App",id:"picme-app",children:Object(m.jsx)(h.a,{children:Object(m.jsxs)(p.c,{children:[Object(m.jsx)(p.a,{path:"/",exact:!0,children:Object(m.jsx)(v,{})}),Object(m.jsx)(p.a,{path:"/colecciones",exact:!0,children:Object(m.jsx)(f,{})}),Object(m.jsx)(p.a,{path:"/coleccion/:ColCod",exact:!0,children:Object(m.jsx)(g,{})})]})})})}}]),o}(c.a.Component);n.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(k,{})}),document.getElementById("root")),i()}},[[66,1,2]]]);
//# sourceMappingURL=main.ab5902b3.chunk.js.map